<strong style="color: red; ">
※ 現在学習中で間違った内容を記載している可能性が大いにあります。もし間違いがありましたら、遠慮なくご指摘くださいませ。
</strong>

# S3

AWSのストレージサービスには3つの形式がある。

- ブロックストレージ
    - 物理マシンのストレージをボリュームという単位で分割して保存する
    - 高速にアクセスできるという点がメリット
    - AWSではEC2にアタッチして使用するEBSやインスタンスストアがある
- オブフェクトストレージ
    - ディレクトリなどの階層構造を持たず、オブフェクトIDという個別の識別子を用いてデータを保存する
    - 安価かつ高い耐久性がメリット
    - AWSではS3やGlacierがある
- ファイルストレージ
    - フォルダ、ディレクトリという形で階層的に管理・保存される
    - 一般的なストレージサービスなので直感的に利用できるのがメリット
    - AWSでは複数のEC2からアタッチできるEFSがる

S3は、スケーラビリティ、データ可用性、セキュリティ、パフォーマンスを提供するオブジェクトストレージサービス。

データはバケットとオブジェクトという形式で保存される。バケットという大本のフォルダ（擬似的に）以下に階層形式で保存され、一つ一つはオブジェクトという単位で呼ばれ、それぞれにURLが付与される。そのため、Webサイトのホスティング機能も有している。（パブリックアクセスを許可する）

またバージョン管理機能により、データを誤って削除した場合でも一つ前のバージョンから復元することができる。

Glacierでは、データの転送速度は遅いが、通常のS3よりも低コストで、アーカイブされたデータの保存に向いている。

### 特徴
- **スケーラビリティ**
    - 1GBあたり約3円と安価
    - 保存容量の上限なし
- **データ可用性**
    - 99.999999999%の耐久性
    - リージョン内で少なくとも3つのAZに自動保存され、冗長化されている
- **セキュリティ**
    - デフォルトでアカウント管理者、ルートユーザーのみアクセス可能
    - IAMでの権限管理
    - データの暗号化、アクセスログを用いた監視

### オブジェクトの構成
[公式ページ](https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/dev/Introduction.html)から引用。

バケット内の全てのオブジェクトは厳密に1つのKeyをもつ。バケット+キー+バージョンIDの組み合わせで、各オブジェクトを一意に識別する。

- Key
    - オブジェクトの名前で固有の識別子
    - https://doc.s3.amazonaws.com/2006-03-01/AmazonS3.wsdl というURLでは、「2006-03-01/AmazonS3.wsdl」がKey
- Value
    - データそのものでbyte値で構成される
- バージョンID
    - バージョン管理に用いるID

### データ構造（画像挿入予定）

### アクセス管理

- **ACL**
    - バケット=オブジェクト間のアクセス権限をXMLで定義する
    - XMLはマークアップ言語
- **バケットポリシー**
    - バケット=オブジェクト間のアクセス権限をJSONで定義する
    - 他のアカウントへの設定も可能
- **IAMポリシー**
  - IAMユーザーに対してS3へのアクセス権限をJSONで定義する
- **署名付きURL**
    - 一時的に外部にオブジェクトへのアクセス権限を付与する